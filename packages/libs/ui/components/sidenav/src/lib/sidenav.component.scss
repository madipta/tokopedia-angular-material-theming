@use 'sass:map';
@use '@angular/material' as mat;

@mixin color($theme) {
  $color-config: mat.get-color-config($theme);
  $background-color-palette: map.get($color-config, background);
  $foreground-color-palette: map.get($color-config, foreground);
  $sidenav-max-width: 247px;
  $sidenav-min-width: 90px;
  $sidenav-top: 96px;

  ui-sidenav {
    overflow: hidden;
    transition: width 0.3s 0.2s ease-out;
    width: $sidenav-max-width;
    z-index: 1000;
    width: $sidenav-max-width;

    &.min {
      width: $sidenav-min-width;

      nav.sidenav {
        width: $sidenav-min-width;
      }

      .menu-text {
        opacity: 0;
        width: 0;
      }

      .toggle-icon {
        transform: rotate(180deg);
      }
    }

    nav.sidenav {
      background: mat.get-color-from-palette(
        $background-color-palette,
        app-bar
      );
      bottom: 0px;
      display: flex;
      flex-direction: column;
      left: 0px;
      overflow-x: hidden;
      overflow-y: auto;
      position: fixed;
      top: $sidenav-top;
      transition: width 0.3s ease;
      width: $sidenav-max-width;
    }

    button.toggle {
      color: mat.get-color-from-palette($foreground-color-palette, hint-text);
      font-size: 0.8rem;
      height: 0.8rem;
      line-height: 0.8rem;
      font-weight: 600;
      margin: 5px 0;

      .toggle-icon {
        display: inline-block;
        position: relative;
        top: -3px;
        transition: transform 0.3s ease 0.2s;
      }

      .menu-text {
        overflow: hidden;
        display: inline-block;
        height: 1rem;
        line-height: 1rem;
        margin-left: 8px;
        opacity: 1;
        transition: all 0.3s ease;
      }
    }
  }
}
